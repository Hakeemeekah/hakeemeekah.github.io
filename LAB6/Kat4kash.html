<!DOCTYPE html>
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Kat4Kash</title>

  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />
</head>

<body class="bg-light text-center p-4">
  <h2>Kat4Kash</h2>

  <button id="loadBtn" class="btn btn-primary mb-4">
    Click here to see some cool facts about cats!
  </button>

  <div class="container">
    <table class="table table-bordered">
      <thead>
        <tr>
          <th>Fact ID</th>
          <th>Fact</th>
        </tr>
      </thead>
      <tbody id="factTable"></tbody>
    </table>
  </div>

  <div class="mb-4">
    <img
      id="catImg"
      src="mycat.webp"
      alt="Picture of a Cat"
      title="Picture of a Cat"
      height="400"
      width="600"
    />
    </div>

  <script>
    const button = document.getElementById("loadBtn");

    button.addEventListener("click", async function handleClick() 
    {
      
      if (button.textContent.includes("HERE ARE SOME COOL FACTS ABOUT CATS")) 
      {
        location.reload();
        return;
      }

      try {
        const response = await fetch("https://brianobruno.github.io/cats.json");
        const data = await response.json();

      
        data.facts.sort((a, b) => a.factId - b.factId);

        const tableBody = document.getElementById("factTable");
        tableBody.innerHTML = "";

       
        data.facts.forEach(fact => 
        {
          const row = `<tr><td>${fact.factId}</td><td>${fact.text}</td></tr>`;
          tableBody.innerHTML += row;
        });

        
        document.getElementById("catImg").src = data.catPhoto;

        
        button.textContent = "HERE ARE SOME COOL FACTS ABOUT CATS";
        button.classList.replace("btn-primary", "btn-success");
      } 

      catch (error) 
      {
        console.error("Error fetching API:", error);
        alert("Failed to load data. Please try again later.");
      }
    });
  </script>
</body>
</html>
